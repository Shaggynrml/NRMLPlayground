{%- style -%}
.collapsible-section-container{
width:95%;
padding-left:20%;
}
.collapsible {
  background-color: white;
  color: #444;
  cursor: pointer;
  padding: 10px;
  width: 100%;
  border: none;
  text-align: left;
  outline: none;
  font-size: 15px;
}
.collapsible.head {
    border-bottom: solid grey 2px;
    font-size:1.75rem;
    font-weight:700;
    border-radius:3px;
    padding: 0.5rem 10rem;
}
.collapsible.sub {
  background-color: #b7b7b7ff;
  color: #444;
  cursor: pointer;
  padding: 18px;
  width: 100%;
  border: none;
  text-align: left;
  outline: none;
  font-size: 15px;
  border-radius:20px;
  padding-top:0.75rem;
}


.collapsible:hover {
  background-color: #ccc;
}

.content {
  padding: 0 12rem;
  background-color: white;
  max-height: 0;
  overflow: hidden;
  transition: max-height 0.2s ease-out;
}

.collapsible:after {
  content: '\02795';
  font-size: 13px;
  color: white;
  float: right;
  margin-left: 5px;
}

.active:after {
  content: "\2796";
}
@media screen and (min-width: 750px) {
    .content{
      padding-left: 15%;
    }
    .gContent{
      padding-top: 5rem;
      padding-left: 15%;
      padding-right: 15%;
    }
    .collapsible{
      padding-left: 15%;
      padding-right: 15%;
    }
  }

{%- endstyle -%}
<div class="collapsible-section-container">
<button type="button" class="collapsible head">{{section.settings.headingName}}</button>
  <div class="content">
{% for blocks in section.blocks %}
  <button type="button" class="collapsible sub">{{blocks.settings.heading}}</button>
    <div class="content">
     <p> {{ blocks.settings.row_content }}</p>
    </div>
{% endfor %}
</div>
</div>
{% javascript %}

var allHeights = 0;
var contents = document.getElementsByClassName("content");
var j;

for (j = 0; j < contents.length; j++) {
  var h = document.getElementsByClassName("content")[j].scrollHeight;
  allHeights += h;
}

var coll = document.getElementsByClassName("collapsible");
var i;

for (i = 0; i < coll.length; i++) {
  coll[i].addEventListener("click", function() {
    this.classList.toggle("active");
    var content = this.nextElementSibling;
    if (content.style.maxHeight == allHeights + "px"){
      content.style.maxHeight = "0px";
    } else {
      content.style.maxHeight = allHeights + "px";
    }
  });
}
{% endjavascript %}

  {% schema %}
  {
  "name": "Collapsible Item",
  "tag": "section",
  "class": "section",
  "settings": [
    {
      "type": "text",
      "id": "headingName",
      "label": "Name of the Heading",
      "default":"Heading Name"
    }
  ], 
 "blocks": [
    {
      "type": "text",
      "name": "Sub Collapsible",
      "settings": [
        {
          "type": "text",
          "id": "heading",
          "label": "Section Name",
          "default": "Section Title"
        },
        {
          "type": "richtext",
          "id": "row_content",
          "label": "Contents"
        },
        {
          "type": "image_picker",
          "id": "imageSelect",
          "label": "Add an Image"
        },
      ]
      
    }
  ],
  "presets": [
      {
      "name": "Collapsible Item" 
      }
  ]
}
  {%- endschema -%}