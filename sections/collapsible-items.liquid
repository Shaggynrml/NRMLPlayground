{%- style -%}
.collapsible-section-container{
width:95%;
padding-left:20%;
}
.collapsible {
  background-color: white;
  color: #444;
  padding: 10px;
  width: 100%;
  border: none;
  text-align: left;
  outline: none;
  font-size: 15px;
}
.collapsible.head {
    border-bottom: solid grey 2px;
    font-size:2.25rem;
    font-weight:300;
    font-family:"system-ui";
    border-radius:3px;
    padding: 0.5rem;
    margin-top:2.5rem;
    margin-bottom:0.25rem;
    letter-spacing:2px;
    cursor: default;

}
.collapsible.sub {
  background-color: #E6E6E6;
  color: #444;
  cursor: pointer;
  padding: 0.5rem  1.5rem;
  width: 100%;
  border: none;
  text-align: left;
  outline: none;
  font-size: 15px;
  border-radius:30px;
  margin: 4px 0;
  font-weight: 500;
}


.collapsible .sub:hover {
  background-color: #ccc;
}

.content {
  background-color: white;
  padding-left:3%;
  max-height: 0;
  overflow: hidden;
  transition: max-height 0.2s ease-out;
}
.content.subcontent{
  border-left: solid 2px grey;
  padding-left: 1%;
  margin-left: 2%;
  padding-right: 5%;
}

.collapsible.sub:after {
  content: '\02795';
  font-size: 13px;
  color: white;
  float: right;
  margin-left: 5px;
}

.active.sub:after {
  content: "\2796";
}
@media screen and (min-width: 750px) {
    .content{
    }
    .gContent{
      padding-top: 5rem;
      padding-left: 15%;
      padding-right: 15%;
    }
    .collapsible{
      padding-left: 15%;
      padding-right: 15%;
    }
  }

{%- endstyle -%}
<div class="collapsible-section-container">
<button type="button" class="collapsible head" id="{{ section.settings.hTagID }}">{{section.settings.headingName}}</button>
{% for blocks in section.blocks %}
  <button type="button" class="collapsible sub">{{blocks.settings.heading}}</button>
    <div class="content subcontent">
     <p> {{ blocks.settings.row_content }}</p>
     {% if blocks.settings.imageSelect != null%}
  <img class="colImage" src="{{blocks.settings.imageSelect| image_url: width: auto, height: auto}}"/>
{% endif %}
    </div>
{% endfor %}
</div>
</div>
{% javascript %}

var allHeights = 0;
var contents = document.getElementsByClassName("content");
var j;

for (j = 0; j < contents.length; j++) {
  var h = document.getElementsByClassName("content")[j].scrollHeight;
  allHeights += h;
}

var coll = document.getElementsByClassName("collapsible sub");
var i;

for (i = 0; i < coll.length; i++) {
  coll[i].addEventListener("click", function() {
    this.classList.toggle("active");
    var content = this.nextElementSibling;
    if (content.style.maxHeight == allHeights + "px"){
      content.style.maxHeight = "0px";
    } else {
      content.style.maxHeight = allHeights + "px";
    }
  });
}
{% endjavascript %}

  {% schema %}
  {
  "name": "Collapsible Item",
  "tag": "section",
  "class": "section",
  "settings": [
    {
      "type": "text",
      "id": "headingName",
      "label": "Name of the Heading",
      "default":"Heading Name"
    },
    {          
      "type": "text",
      "id": "hTagID",
      "label":"link Tag",
      "default":"HName"}
  ], 
 "blocks": [
    {
      "type": "text",
      "name": "Sub Collapsible",
      "settings": [
        {
          "type": "text",
          "id": "heading",
          "label": "Section Name",
          "default": "Section Title"
        },
        {
          "type": "text",
          "id": "sTagID",
          "label":"link Tag",
          "default":"SName"
        },
        {
          "type": "richtext",
          "id": "row_content",
          "label": "Contents"
        },
        {
          "type": "image_picker",
          "id": "imageSelect",
          "label": "Add an Image"
        },
      ]
      
    }
  ],
  "presets": [
      {
      "name": "Collapsible Item" 
      }
  ]
}
  {%- endschema -%}