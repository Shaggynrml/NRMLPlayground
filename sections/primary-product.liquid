
<style>
  @import url('https://fonts.googleapis.com/css?family=Poppins:100,100i,200,200i,300,300i,400,400i,500,500i,600,600i,700,700i,800,800i,900,900i&subset=devanagari,latin-ext');

  .carousel-inner img {
      width: 100%
  }
  .primary-product-container{
    display:flex;
    flex-direction: row;
    margin-bottom:100px;
    justify-content:center;
  }
  .product-title{
    font-size:1.8rem;
    font-family: 'Helvetica Neue', sans-serif;
  }
  
  .product-vendor a{
    display: inline-block;
    position: relative;
    font-size: 1.3rem;
    font-family: 'Helvetica Neue', sans-serif;
    text-decoration:none;
    color:#545454;
  }

  .product-vendor a::after {
    content: '';
    position: absolute;
    width: 100%;
    transform: scaleX(0);
    height: 2px;
    bottom: 0;
    left: 0;
    background-color: #545454;
    transform-origin: bottom right;
    transition: transform 0.25s ease-out;
  }
  .product-vendor a:hover::after {
    transform: scaleX(1);
    transform-origin: bottom left;
  }
  .carousel-item img {
  }
  .primary-product-images-container{
    margin-bottom:80px;
  }
  .primary-product-info-container{
    padding:10px;
  }
  #myCarousel .carousel-indicators {
      position:static;
      margin-top: 0px;
      margin-bottom:10px;
	  
  }

  #myCarousel .carousel-indicators>li {
      width: 100px
  }

  #myCarousel .carousel-indicators li img {
      display: block;
      opacity: 0.5;
      margin-bottom:10px;
  }

  #myCarousel .carousel-indicators li.active img {
      opacity: 1
  }

  #myCarousel .carousel-indicators li:hover img {
      opacity: 0.75
  }
  .size-picker-section{

  }
  .size-radio-buttons{

  }
  .size-radio-label{

  }
  .shaggys-form__inputs{
    justify-content:center;
    align-items: center;
    text-align:center;
    padding:10px;
    padding-top: 20px;
  }
  .shaggys-form__inputs input[type='radio'] {
  clip: rect(0, 0, 0, 0);
  overflow: hidden;
  position: absolute;
  height: 1px;
  width: 1px;
  }

  .shaggys-form__inputs input[type='radio'] + label {
    border: var(--variant-pills-border-width) solid rgba(var(--color-foreground), var(--variant-pills-border-opacity));
    background-color: rgb(var(--color-background));
    color: rgba(var(--color-foreground));
    color: rgb(var(--color-foreground));
    display: inline-block;
    margin: 0.3rem;
    padding: 1rem ;
    font-size: 1.4rem;
    letter-spacing: 0.1rem;
    line-height: 1;
    text-align: center;
    transition: border var(--duration-short) ease;
    cursor: pointer;
    position: relative;
    width:6rem;
    text-align:center !important; 
  }
  .shaggys-form__inputs input[type='radio']:checked + label {
    background-color:#252525;
    color: #d3d3d3;
    border: 1px solid #d3d3d3;
  }

  .shaggys-form__inputs input[type='radio']:disabled + label {
    text-decoration:line-through;
    color: #d3d3d3;
    border: 1px solid #d3d3d3;
  }


  .size-label {
    font-size:2rem;
    text-decoration:underline;
  }
  .product-pricing{
    padding-top: 30px;
  }
  .shaggys-add-to-cart-button{
    width: 100%;
    height: 40px;
    border: none;
    background-color: #d9d9d9;
    display: flex;
    margin-top:1rem;
    align-items: center;
    justify-content: center;
    text-align:center;
    cursor: pointer;
    transition-duration: .5s;
    overflow: hidden;
    box-shadow: 0px 5px 10px rgba(0, 0, 0, 0.103);
    position: relative;
  }
  .IconContainer {
    position: absolute;
    left: -50px;
    width: 30px;
    height: 30px;
    background-color: transparent;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: hidden;
    z-index: 2;
    transition-duration: .5s;
  }

  .icon {
    border-radius: 1px;
  }
  .product-card--price {
    font-size: 1.5rem;
    font-weight: bold;
    text-align: left;
  }
    .product-card__price--old{
    text-decoration:line-through;
    text-decoration-thickness: 2px;
    text-decoration-color: red;
  }
  .text {
    height: 100%;
    width: fit-content;
    display: flex;
    align-items: center;
    justify-content: center;
    color: rgb(17, 17, 17);
    z-index: 1;
    transition-duration: .5s;
    font-size: 1.64em;
    font-weight: 600;
    margin-bottom: 0;
  }

  .p {
    font-size:1.8rem;
  }

  .shaggys-add-to-cart-button:hover  {
    background-color: #252525;
    color: #e9e9e9;
  }
  .shaggys-add-to-cart-button:hover .text{
    color:#e9e9e9;
  }

  .tabbed {
    width: 100%;
  }
 .tabbed > input {
    display: none;
  }
  .tabbed > label {
    display: block;
    float: left;
    padding: 12px 20px;
    margin-right: 5px;
    cursor: pointer;
    transition: background-color 0.3s;
  }
  .tabbed > label:hover, .tabbed > input:checked + label {
    background: #d9d9d9;
  }
  .tabs {
    clear: both;
    perspective: 600px;
  }
  .tabs > div {
    width: 100%;
    position: absolute;
    border: 2px solid #d9d9d9;
    padding: 10px 30px 40px;
    line-height: 1.4em;
    opacity: 0;
    transform: rotateX(-20deg);
    transform-origin: top center;
    transition: opacity 0.3s, transform 1s;
    z-index: 1;
    
  }
  #tab-nav-1:checked ~ .tabs > div:nth-of-type(1), #tab-nav-2:checked ~ .tabs > div:nth-of-type(2), #tab-nav-3:checked ~ .tabs > div:nth-of-type(3), #tab-nav-4:checked ~ .tabs > div:nth-of-type(4) {
    transform: rotateX(0);
    opacity: 1;
    z-index: 1;
    margin-bottom:10px;
  }
  .spacer-under-image-carousel{
    height:300px;
  }

  @media screen and (max-width: 992px) {
    .tabbed {
      width: 100%;
    }
    .tabbed > label {
      display: none;
    }
    .tabs > div {
      width: 100%;
      border: none;
      padding: 10px;
      opacity: 1;
      position: relative;
      transform: none;
      margin-bottom: 60px;
    }
    .tabs > div h2 {
      border-bottom: 2px solid #d9d9d9;
      padding-bottom: 0.5em;
    }
    .spacer-under-image-carousel{
    display:none;
  }
    .primary-product-container{
    flex-direction:column;
    }
  }
  .product-description-container{
    margin-top:10px;
  }



    @media screen and (max-width:780px){
    .primary-product-container{
      flex-direction:column;
      
  }
    #myCarousel .carousel-indicators>li {
      width: 60px
  }
  }

  .modal {
  display: none; /* Hidden by default */
  position: fixed; /* Stay in place */
  z-index: 10; /* Sit on top */
  padding-top: 10px; /* Location of the box */
  left: 0;
  top: 0;
  width: 100%; /* Full width */
  height: 100%; /* Full height */
  overflow: scroll; /* Enable scroll if needed */
  background-color: #ffffff; /* Fallback color */
  justify-content: center;
  flex-direction: column;

  }


  input[type=checkbox] {
    display: none;
  }
  /* Modal Content (Image) */
  .modal-content {
    margin: auto;
    display: flex;
    width: 70%;
    max-width: none;
    transition: transform 0.25s ease;
    border:none;
    cursor: zoom-in;
    padding-top:1rem;
    justify-content: center;
    flex-direction: column;
    overflow:scroll;
  }
  input[type=checkbox]:checked ~ label > img {
    transform: scale(2);
    padding-top:1rem;
    cursor: zoom-out;
  }
  /* Caption of Modal Image (Image Text) - Same Width as the Image */
  #caption {
    margin: auto;
    display: flex;
    width: 80%;
    max-width: 700px;
    text-align: center;
    color: #ccc;
    padding: 10px;
    height: 150px;
  }

  /* Add Animation - Zoom in the Modal */
  .modal-content, #caption {
    animation-name: zoom;
    animation-duration: 0.1s;
  }

  @keyframes zoom {
    from {transform:scale(0)}
    to {transform:scale(1)}
  }

  /* The Close Button */
  .modalClose {
    color: #000;
    font-size: 40px;
    font-weight: bold;
    transition: 0.3s;
    padding: 1rem;
  }

  .modalClose:hover,
  .modalClose:focus {
    color: #111;
    text-decoration: none;
    cursor: pointer;
  }

  .modal-navigation-container{
    display: flex;
    flex-direction: horizontal;
    justify-content:center;


  }
  .imgLabel{
    justify-self: center;
  }
  .modal-button-right{
    color: #000;
    font-size: 40px;
    font-weight: bold;
    padding: 1rem;
    cursor: pointer;
  }
  .modal-button-left{
    color: #000;
    font-size: 40px;
    font-weight: bold;
    padding: 1rem;
    cursor: pointer;
  }
  /* 100% Image Width on Smaller Screens */
  @media only screen and (max-width: 700px){
    .modal-content {
      width: 100%;
    }
  }

  .payment-option{
    align-conten: start;
    border-style: none !important;
  }
</style>

{%- style -%}

{%- endstyle -%}

  <script src="{{ 'product-form.js' | asset_url }}" defer="defer"></script>

  <div class= "primary-product-container">
    <div class= "primary-product-images-container col-12 col-lg-6">
      <div class="container-fluid">
        <div class="row d-flex justify-content-center">
            <div>
              <div id="myCarousel" class="carousel slide" data-ride="carousel" align="center">
                  <div id = "carouselInner" class="carousel-inner">
                    {%- for media in product.media -%}
                      <div class="carousel-item {% if forloop.first %} active {% endif %}" style="padding-top: {{ 1 | divided_by: media.preview_image.aspect_ratio | times: 1 }}%;">
                        <img id="img-{{ forloop.index }}"
                            src="{{ media | image_url: width: 1800, height: 1000 }}"
                            sizes="(min-width: 1200px) calc((1200px - 19.5rem) / 12), (min-width: 750px) calc((100vw - 16.5rem) / 8), calc((100vw - 8rem) / 5)"
                            alt="{{ media.alt | escape }}"
                            
                          >
                      </div>              
                    {%- endfor -%}
                  </div>

                  <ol class="carousel-indicators ">
                    {%- for media in product.media -%}
                      {% assign slideIndex = forloop.index0 %}
                      <li class="list-inline-item{% if forloop.first %} active {% endif %}"> 
                        <a id="carousel-selector-{{slideIndex}}" class="{% if forloop.first %} selected {% endif %}" data-slide-to="{{slideIndex}}" data-target="#myCarousel">                    
                          <img id="Thumbnail-{{ forloop.index }}"
                                src="{{ media | image_url: width: 80, height: 50 }}"
                                alt="{{ media.alt | escape }}"
                                loading="lazy"
                              > 
                        </a> 
                      </li>
                    {%- endfor -%}
                  </ol>
              </div>
            </div>
        </div>
      </div>

      <div class= "spacer-under-image-carousel">
      </div>
    </div>
    <div class= "primary-product-info-container col-12 col-lg-6 col-xl-4">
      <div class= "product-vendor">
        {%for collection in product.collections%}
          {% assign title = collection.title | upcase %}
          {% if title == product.vendor  %}
            <a href="{{ collection.url }}"> {{ title | downcase }} </a>
          {%endif%}
        {% endfor %}
      </div>
      <div class= "product-title">
        {{product.title}}
              <div {{ block.shopify_attributes }}>
                {%- assign product_form_installment_id = 'product-form-installment-' | append: section.id -%}
                {%- form 'product', product, id: product_form_installment_id, class: 'installment caption-large' -%}
                  <input type="hidden" name="id" value="{{ product.selected_or_first_available_variant.id }}">
                  {{ form | payment_terms }}
                {%- endform -%}
              </div>
      </div>
      {% if product.vendor == "NIKE" %}
        <p style="color:red;">*NIKE PRODUCTS ONLY AVAILABLE FOR SHIPPING WITHIN CANADA</p>
      {% endif %}
      {% if product.tags contains 'CLEARANCE' or  product.tags contains 'RELEASE' or product.tags contains 'final sale'%}
        <p style="color:red;">*This product is final sale and will not be accepted for any returns or exchanges which includes for store credit.</p>
      {% endif %}
            {% if product.type contains "FOOTWEAR"%}
      <p>*PLEASE NOTE: CONSECUTIVE ORDERS AND ORDERS PLACED BY PROXY SERVER OFTEN INDICATE BOT ACTIVITY AND WILL BE SUBJECT TO A 10% RESTOCKING FEE. <a href= "https://nrml.ca/pages/faq"> FIND OUT MORE. </a></p>
      {%- endif -%}
      <div class= "size-picker-section">
        {%- assign product_form_id = 'product-form-' | append: section.id -%}
        
        
        <shaggy-variant-radio class="no-js-hidden" data-section="{{ section.id }}" data-url="{{ product.url }}" {{ block.shopify_attributes }}>
          <fieldset class="js shaggys-form__inputs">
            <legend class="size-label" >SIZE</legend>
              {%- for size in product.variants -%}
                  <input  type="radio" id="{{ size.option1 }}"
                      name="{{ product.options[0] }}"
                      value="{{ size.id | escape }}"
                      form="{{ product_form_id }}"
                      {% if product.selected_variant.option1 == size.option1 %}checked{% endif %}
                      {% if size.available == false %} disabled {% endif %}
                  >
                  <label for="{{ size.option1 }}"  type="radio">
                  {{ size.option1 }}
                  </label>
              {%- endfor -%}
          </fieldset>
          <script type="application/json">
          {{ product.variants | json }}
          </script>
        </shaggy-variant-radio>

      </div>
      <div class = "product-pricing">
        {% if product.compare_at_price > product.price %}
          <div class="product-card--price">
            <span class="product-card__price--old">{{ product.compare_at_price | money }}</span>
            <span class="product-card__price--new">{{ product.price | money }}</span>
            <span>save {{ product.compare_at_price | minus: product.price | times: 100.0 | divided_by: product.compare_at_price | money_without_currency | times: 100 | remove: '.0'}}%</span>
          </div>
        {% else %}
          <div class="product-card--price">{{ product.price | money }}</div>
        {% endif %}
        {%- if shop.taxes_included or shop.shipping_policy.body != blank -%}
          <div class="product__tax caption rte">
            {%- if shop.taxes_included -%}
              {{ 'products.product.include_taxes' | t }}
            {%- endif -%}
            {%- if shop.shipping_policy.body != blank -%}
              {{ 'products.product.shipping_policy_html' | t: link: shop.shipping_policy.url }}
            {%- endif -%}
          </div>
        {%- endif -%}
        <div {{ block.shopify_attributes }}>
          {%- assign product_form_installment_id = 'product-form-installment-' | append: section.id -%}
          {%- form 'product', product, id: product_form_installment_id, class: 'installment caption-large' -%}
            <input type="hidden" name="id" value="{{ product.selected_or_first_available_variant.id }}">
            {{ form | payment_terms }}
          {%- endform -%}
        </div>
      </div>
      <div class="payment-options">
      {%- for block in section.blocks -%}
        {%- case block.type -%}
          {%- when '@app' -%}
            <div class="payment-option">
            {% render block %}
            </div>
          {%- endcase -%}
      {%-  endfor -%}
      </div>
      <div class = "buy-button-section">
        <product-form class="product-form" data-cart-type="{{ settings.cart_type }}">
        <div class="product-form__error-message-wrapper" role="alert" hidden>
          There is no more quanities available of this size.
        </div>

        {%- form 'product', product, id: product_form_id, class: 'form', novalidate: 'novalidate', data-type: 'add-to-cart-form' -%}
          <input type="hidden" name="id" value="{{ product.selected_or_first_available_variant.id }}" disabled>
          <div class="product-form__buttons">
          <button
              type="submit"
              name="add"
              class="shaggys-add-to-cart-button"
              {% if product.selected_or_first_available_variant.available == false %}disabled{% endif %}
            >
            <span class="IconContainer"> 
              {% render 'icon-close' %}
            </span>
            <p class = "text"> {{ 'products.product.add_to_cart' | t }}</p>
            <div class="loading-overlay__spinner hidden">
            </div>
          </button>
          </div>
        {%- endform -%}
        </product-form>
      </div>
      <div class = "product-description-container">
        <div class="tabbed">
        <input type="radio" name="tabs" id="tab-nav-1" checked>
        <label for="tab-nav-1">Description</label>
        <input type="radio" name="tabs" id="tab-nav-2">
        <label for="tab-nav-2">Shipping</label>
        <input type="radio" name="tabs" id="tab-nav-3">
        <label for="tab-nav-3">Return Policy</label>
        <input type="radio" name="tabs" id="tab-nav-4">
        <div class="tabs">
        <div><h2>Description</h2><p>{{ product.description }}</p></div>
        <div><h2>Shipping</h2><p>Do you ship World Wide?
                                  Yes! NRML.ca does ship internationally and to the United States, but there are some locations we are unable to ship to. If we are unable to ship to your location, we will promptly contact you. Some products cannot be shipped to certain locations due to licensure laws.

                                  How can I track my order once it has shipped?
                                  Once your order is shipped out from NRML.ca, we will send you a shipment confirmation email with your tracking information. It may take up to 24 hours for the tracking number to become visible on Canada Post’s website. 

                                  How long will it take for my order to be shipped?
                                  Orders are typically processed within 2-5 day period once the order has been made. We only ship out orders on weekdays; if you place an order after store hours or during the weekend, it will be shipped out the first following business day. </p></div>
        <div><h2>Return Policy</h2><p>
          {% if product.tags contains 'CLEARANCE' or  product.tags contains 'RELEASE'%}
            <p>*This product is final sale and will not be accepted for any returns or exchanges which includes for store credit.</p>
          {% endif %}
              We want you to be fully satisfied with your purchase. If you are not satisfied with an item you purchased, you may return the item within 30 days of delivery for a full refund of the purchase price in store credit, minus the shipping, handling or other additional charges. The item must be unworn, undamaged and accompanied by the original receipt in order to be eligible for a return. All sale and promotional items are final sale. To conduct a return, please contact us through our contact form or email us at help@nrml.ca with your order number and name of item(s) you wish to return. Please note, NRML does not offer refunds, but upon inspection, will gladly provide you with a store credit or an item exchange. NRML will not accept or assume responsibility for lost or damaged packages being returned, so it is strongly recommended that any returns be made through a reliable courier, with a tracking number or traceable system.
          </p></div>
      </div>
    </div>
  </div>
  
<!-- The Modal -->
<div id="myModal" class="modal">

<input type= "checkbox" id = "zoomCheck">

<label class="imgLabel" for ="zoomCheck">
  <!-- Modal Content (The Image) -->
  <img class="modal-content" id="img01">
</label>
  <div class="modal-navigation-container">

  <span class = "modal-button-left" id="modal-button-left">⟵</i> </span>

  <!-- The Close Button -->
  <span class="modalClose">✕</span>
  
  <span class = "modal-button-right" id = "modal-button-right">⟶</span>

  </div>

</div>
  
  
  {%- liquid
    if product.selected_or_first_available_variant.media
      assign seo_media = product.selected_or_first_available_variant.media
    else
      assign seo_media = product.media
    endif
  -%}
<script>
// Get the modal
var modal = document.getElementById("myModal");
// Get the image and insert it inside the modal - use its "alt" text as a caption
var img = document.getElementById("carouselInner");
var modalImg = document.getElementById("img01");
var modalLeft = document.getElementById("modal-button-left")
var modalRight = document.getElementById("modal-button-right")
const media = {{product.media | json}}
var currentIndex = 0

img.onclick = function(){
  modal.style.display = "flex";
  modalImg.src = media[currentIndex].src;
}

modalLeft.onclick = function(){
  
  if (currentIndex == 0){
    currentIndex = media.length - 1
    modalImg.src = media[currentIndex].src;
  } else {
    currentIndex = currentIndex - 1
    modalImg.src = media[currentIndex].src; 
  }
 

}

modalRight.onclick = function(){
    if (currentIndex == (media.length - 1)){
    currentIndex = 0
    modalImg.src = media[currentIndex].src;
  } else {
    currentIndex = currentIndex + 1
    modalImg.src = media[currentIndex].src; 
  }
 
}
 
// Get the <span> element that closes the modal
var span = document.getElementsByClassName("modalClose")[0];

// When the user clicks on <span> (x), close the modal
span.onclick = function() {
  modal.style.display = "none";
}
</script>


  <script type="application/ld+json">
    {
      "@context": "http://schema.org/",
      "@type": "Product",
      "name": {{ product.title | json }},
      "url": {{ request.origin | append: product.url | json }},
      {% if seo_media -%}
        "image": [
          {{ seo_media | image_url: width: seo_media.preview_image.width | prepend: "https:" | json }}
        ],
      {%- endif %}
      "description": {{ product.description | strip_html | json }},
      {% if product.selected_or_first_available_variant.sku != blank -%}
        "sku": {{ product.selected_or_first_available_variant.sku | json }},
      {%- endif %}
      "brand": {
        "@type": "Brand",
        "name": {{ product.vendor | json }}
      },
      "offers": [
        {%- for variant in product.variants -%}
          {
            "@type" : "Offer",
            {%- if variant.sku != blank -%}
              "sku": {{ variant.sku | json }},
            {%- endif -%}
            {%- if variant.barcode.size == 12 -%}
              "gtin12": {{ variant.barcode }},
            {%- endif -%}
            {%- if variant.barcode.size == 13 -%}
              "gtin13": {{ variant.barcode }},
            {%- endif -%}
            {%- if variant.barcode.size == 14 -%}
              "gtin14": {{ variant.barcode }},
            {%- endif -%}
            "availability" : "http://schema.org/{% if variant.available %}InStock{% else %}OutOfStock{% endif %}",
            "price" : {{ variant.price | divided_by: 100.00 | json }},
            "priceCurrency" : {{ cart.currency.iso_code | json }},
            "url" : {{ request.origin | append: variant.url | json }}
          }{% unless forloop.last %},{% endunless %}
        {%- endfor -%}
      ]
    }
  </script>


{% schema %}
{
  "name": "Primary Product",
  "tag": "section",
  "class": "section-product",
  "blocks": [
    {
      "type": "@app"
    },
    {
      "type": "popup",
      "name": "t:sections.main-product.blocks.popup.name",
      "settings": [
        {
          "type": "text",
          "id": "text",
          "default": "Pop-up link text",
          "label": "t:sections.main-product.blocks.popup.settings.link_label.label"
        },
        
        {
          "id": "page",
          "type": "page",
          "label": "t:sections.main-product.blocks.popup.settings.page.label"
        }
      ]
    }
  ],
  "settings": [
      
  ],
  "presets": [
      {
      "name": "Primary Product"
      }
  ]
}
{% endschema %}